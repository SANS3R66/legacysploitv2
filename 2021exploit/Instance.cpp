#include "Instance.h"

namespace RBX {

    DWORD Instance::findFirstChildPtr(const char* name) {
        DWORD* children = (DWORD*)*(DWORD*)(this->instance_ptr + 0x2C);

        // skidding same logic from TaskScheduler job :skidding:
        DWORD children_start = *children;
        DWORD children_end = *children + 1; // 0x4

        while (children_start != children_end) {
            DWORD child = *(DWORD*)children_start;
            if (child == NULL) {
                children_start += 8;
                continue;
            }

            const char* child_name = *((char**)(child + 0x28));

            if (strcmp(child_name, name) == 0) {
                return child;
            }

            children_start += 8;
        }

        return 0;
    }
}