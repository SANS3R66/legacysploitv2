#pragma once
#include <Windows.h>
#include "retcheck.h"

#define x(x) (x - 0x400000 + ((DWORD)GetModuleHandleA(0)))

using Fr_lua_newthread = DWORD(__cdecl*)(DWORD);
Fr_lua_newthread r_lua_newthread = (Fr_lua_newthread)unprotect(x(0x1341700));

using Fr_lua_call = void(*)(DWORD, int, int);
Fr_lua_call r_lua_call = (Fr_lua_call)unprotect(x(0x1340D00));

using Fr_lua_getfield = void(__cdecl*)(DWORD, int, const char*);
Fr_lua_getfield r_lua_getfield = (Fr_lua_getfield)unprotect(x(0x13411D0));

#define r_lua_getglobal(L, k) (r_lua_getfield(L, -10002, k))